import{X as j,r as s,j as e}from"./app-CI1o2zDc.js";import{A as N,a as b,b as v,c as y}from"./Footer-Du3FwGAi.js";import{X as w}from"./index.es-BKk90K_5.js";import"./Helmet-BgtHYfTe.js";const T=()=>{const{trainers:o}=j().props,[l,c]=s.useState(""),[t,n]=s.useState({trainerName:"",trainerImage:"",trainerLogDescription:"",trainerId:""}),[d,m]=s.useState(null),h=[{name:"Image",selector:r=>e.jsx("img",{src:`/template/images/${r.trainer_image}`,alt:"Trainer",style:{width:"50px"}}),sortable:!0},{name:"Trainer Name",selector:r=>`${r.trainer_name}`,sortable:!0},{name:"Description",selector:r=>`${r.log_description||"N/A"}`,sortable:!0},{name:"Option",cell:r=>e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#",onClick:a=>{a.preventDefault(),p(r.id)},children:"Edit"})," | ",e.jsx("a",{href:"#",onClick:a=>{a.preventDefault(),x(r.id)},children:"Delete"})]})}],u=async r=>{if(r.preventDefault(),!d){alert("No trainer selected to edit.");return}const a=new FormData;a.append("id",t.trainerId),a.append("trainer_name",t.trainerName),a.append("log_description",t.trainerLogDescription),t.trainerImage instanceof File&&a.append("trainer_image",t.trainerImage),console.log(t.trainerId+" : "+t.trainerName+" : "+t.trainerImage);try{const i=await fetch("/admin/book-trainer/add-trainer/edit",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:a}),g=await i.json();console.log(g),i.ok?(alert("Updated successfully."),window.location.href="/admin/book-trainer/trainer-list/"):alert("Failed to update.")}catch(i){console.error("Update failed:",i)}},p=r=>{m(r);const a=o.find(i=>i.id===r);a&&n({trainerName:a.trainer_name||"",trainerLogDescription:a.log_description||"",trainerImage:"",trainerId:a.id||""})},x=async r=>{if(console.log("Delete membership with ID:",r),!!window.confirm("Are you sure you want to delete this trainer?"))try{(await fetch(`/admin/book-trainer/add-trainer/delete?id=${r}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({id:r})})).ok?(alert("Successfully deleted."),window.location.href="/admin/book-trainer/trainer-list/"):alert("Failed to delete membership.")}catch(i){console.error("Error submitting:",i)}},f=o.filter(r=>{const a=r.trainer_name.toLowerCase(),i=r.trainer_image.toLowerCase();return a.includes(l.toLowerCase())||i.includes(l.toLowerCase())});return e.jsxs("div",{children:[e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card recent-sales overflow-auto",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"List Of Trainers"}),e.jsx(w,{columns:h,data:f,pagination:!0,highlightOnHover:!0,subHeader:!0,subHeaderComponent:e.jsx("input",{type:"text",placeholder:"Search",onChange:r=>c(r.target.value),style:{width:"100%",margin:"0"}})})]})})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card recent-sales overflow-auto",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Edit Trainer"}),e.jsxs("form",{onSubmit:u,encType:"multipart/form-data",children:[e.jsx("input",{type:"hidden",id:"trainerId",name:"trainerId",className:"form-control",value:t.trainerId,onChange:r=>n({...t,trainerId:r.target.value})}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"trainerName",className:"col-sm-2 col-form-label",children:"Trainer Name"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"text",id:"trainerName",name:"trainerName",className:"form-control",value:t.trainerName,onChange:r=>n({...t,trainerName:r.target.value})})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"trainerLogDescription",className:"col-sm-2 col-form-label",children:"Description"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"text",id:"trainerLogDescription",name:"trainerLogDescription",className:"form-control",value:t.trainerLogDescription,onChange:r=>n({...t,trainerLogDescription:r.target.value})})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"trainerImage",className:"col-sm-2 col-form-label",children:"Trainer Image"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"file",id:"trainerImage",name:"trainerImage",className:"form-control",onChange:r=>n({...t,trainerImage:r.target.files[0]})})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})]})]})})})]})};function L(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx(b,{}),e.jsx(v,{}),e.jsxs("main",{id:"main",className:"main",children:[e.jsxs("div",{className:"pagetitle",children:[e.jsx("h1",{children:"List of all Trainers"}),e.jsx("nav",{children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"#",children:"Home"})}),e.jsx("li",{className:"breadcrumb-item active",children:"Proffessional Trainers"})]})})]}),e.jsx("section",{className:"section dashboard",children:e.jsx(T,{})})]}),e.jsx(y,{})]})}export{L as default};
