import{X as S,r as t,j as e}from"./app-B5uUBiNZ.js";import{A as _,a as T,b as M,c as D}from"./Footer-DrHeRHwj.js";import{d as y}from"./dayjs.min-RJS5d9iP.js";import"./Helmet-C80axTHt.js";const k=()=>{const{all_users:c,trainers:o}=S().props,[l,m]=t.useState(""),[r,d]=t.useState(""),[h,u]=t.useState("8:00am - 9:30am"),[i,x]=t.useState(""),[n,j]=t.useState("1 Month"),[p,w]=t.useState(""),b=async()=>{if(l===""||r===""){alert("Please fill the form before submitting.");return}if(!o.find(s=>s.id==r)){alert("Selected trainer not found.");return}const v=parseInt(n),f=y(i).add(v,"month"),N=parseInt(n)*2e3;try{const s=await fetch("/trainer-over-the-counter-payment",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({trainer_user_id:l,trainer_id:r,trainer_payment_method:"Over The Counter",trainer_status:"Approved",trainer_duration:n,trainer_time_schedule:h,trainer_total_price:N,trainer_start_date:i,trainer_end_date:f.format("YYYY-MM-DD")})});if(s.ok)alert("Bookings has been successfully created."),window.location.href="/admin/book-trainer/booking-list/";else{const g=await s.json();setErrors({general:g.message||"Error submitting!"});return}}catch(s){console.error("Error submitting:",s),setErrors({general:"Something went wrong. Please try again!"});return}};return e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Select a member account and trainer to book a class session."}),e.jsxs("form",{children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label",children:"Select an Account:"}),e.jsx("div",{className:"col-sm-10",children:e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"user_id",value:l,onChange:a=>m(a.target.value),children:[e.jsx("option",{children:"Select an Account"}),c.map(a=>e.jsxs("option",{value:a.id,children:[a.first_name," ",a.last_name]},a.id))]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label",children:"Select Membership Trainer:"}),e.jsx("div",{className:"col-sm-10",children:e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"trainer_id",value:r,onChange:a=>d(a.target.value),children:[e.jsx("option",{children:"Select Membership Trainer"}),o.map(a=>e.jsx("option",{value:a.id,children:a.trainer_name},a.id))]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label",children:"Select Time Schedule:"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{className:"trainer_start_date form-select",value:i,onChange:a=>x(a.target.value),type:"date",min:p})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label",children:"Select Time Schedule:"}),e.jsx("div",{className:"col-sm-10",children:e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"trainer_time_schedule",value:r,onChange:a=>u(a.target.value),children:[e.jsx("option",{value:"8:00am - 9:30am",children:"8:00am - 9:30am"}),e.jsx("option",{value:"9:30am - 11:00am",children:"9:30am - 11:00am"}),e.jsx("option",{value:"11:00am - 12:30pm",children:"11:00am - 12:30pm"}),e.jsx("option",{value:"12:30pm - 2:00pm",children:"12:30pm - 2:00pm"}),e.jsx("option",{value:"2:00pm - 3:30pm",children:"2:00pm - 3:30pm"})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label",children:"Select Duration:"}),e.jsx("div",{className:"col-sm-10",children:e.jsxs("select",{className:"trainer_duration form-select",name:"trainer_duration",value:n,onChange:a=>j(a.target.value),children:[e.jsx("option",{selected:!0,value:"1 Month",children:"1 Month"}),e.jsx("option",{value:"3 Months",children:"3 Months"}),e.jsx("option",{value:"6 Months",children:"6 Months"}),e.jsx("option",{value:"12 Months",children:"12 Months"})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("button",{type:"submit",className:"btn btn-primary",onClick:a=>{a.preventDefault(),b()},children:"Submit"})})]})]})]})})};function Y(){return e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsx(T,{}),e.jsx(M,{}),e.jsxs("main",{id:"main",className:"main",children:[e.jsxs("div",{className:"pagetitle",children:[e.jsx("h1",{children:"Add Booking for Trainers"}),e.jsx("nav",{children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"#",children:"Home"})}),e.jsx("li",{className:"breadcrumb-item active",children:"Add Booking for Trainer"})]})})]}),e.jsx("section",{className:"section dashboard",children:e.jsx(k,{})})]}),e.jsx(D,{})]})}export{Y as default};
