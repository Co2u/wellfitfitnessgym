import{X as B,r as s,j as e}from"./app-B5uUBiNZ.js";import{M as F}from"./Head-BXCmIjaD.js";import{H as L,F as H}from"./Footer-Ch4wCGTZ.js";import"./Helmet-C80axTHt.js";function $(){const{get_user_membership:y,get_user_booktrainor:b}=B().props,[c,i]=s.useState(1),[o,l]=s.useState(1),[n]=s.useState(5),[h,f]=s.useState(""),[d,g]=s.useState(""),[R,m]=s.useState(null),[X,q]=s.useState(null),[I,S]=s.useState(null),[J,C]=s.useState(null),u=y.filter(t=>t.plan_name.toLowerCase().includes(h.toLowerCase())),p=b.filter(t=>t.trainer_name.toLowerCase().includes(d.toLowerCase())),j=c*n,T=j-n,N=u.slice(T,j),w=Math.ceil(u.length/n),x=o*n,M=x-n,v=p.slice(M,x),P=Math.ceil(p.length/n),O=t=>i(t),_=t=>l(t),k=async t=>{S(t);try{const r=await fetch(`/member/account-history/member-booktrainor-cancel?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({id:t})}),a=await r.json();r.ok&&(alert("Successfully cancelled."),window.location.href="/member/account-history")}catch(r){console.error("Error submitting:",r)}},A=async t=>{C(t);try{const r=await fetch(`/member/account-history/member-booktrainor-delete?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({id:t})}),a=await r.json();r.ok&&(alert("successfully deleted."),window.location.href="/member/account-history")}catch(r){console.error("Error submitting:",r)}},D=async t=>{m(t);try{const r=await fetch(`/member/account-history/member-plan-cancel?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({plan_id:t})}),a=await r.json();r.ok&&(alert("Successfully cancelled."),window.location.href="/member/account-history")}catch(r){console.error("Error submitting:",r)}},E=async t=>{m(t);try{const r=await fetch(`/member/account-history/member-plan-delete?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({plan_id:t})}),a=await r.json();r.ok&&(alert("Membership has been successfully deleted."),window.location.href="/member/account-history")}catch(r){console.error("Error submitting:",r)}};return e.jsxs("section",{className:"gym-section",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{children:"Account History"}),e.jsx("h2",{children:"The data below shows your previous membership plans and class booking history."})]}),e.jsxs("div",{className:"gym-container",children:[e.jsxs("div",{className:"gym-column",children:[e.jsxs("div",{className:"Theader",children:[e.jsx("h2",{children:"Gym Membership Plan"}),e.jsx("input",{type:"text",placeholder:"Search",value:h,onChange:t=>{f(t.target.value),i(1)}})]}),e.jsxs("table",{className:"gym-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Plan"}),e.jsx("th",{children:"Total Amount"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Option"})]})}),e.jsx("tbody",{children:N.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.plan_name}),e.jsxs("td",{children:["₱",parseInt(t.plan_price).toLocaleString()]}),e.jsx("td",{children:t.status}),e.jsxs("td",{children:[t.status==="Pending"&&e.jsx("a",{className:"cancelMembership",href:"#",onClick:r=>{r.preventDefault(),D(t.id)},children:"Cancel"}),t.status==="Cancelled"&&e.jsx("a",{className:"MemberPlanDelete",href:"#",onClick:r=>{r.preventDefault(),E(t.id)},children:"Delete"}),e.jsx("a",{href:`/member/account-history/membership?id=${t.id}`,children:" View "})]})]},t.id))})]}),e.jsx("div",{className:"pagination",children:Array.from({length:w},(t,r)=>e.jsx("button",{onClick:()=>O(r+1),className:c===r+1?"active":"",children:r+1},r+1))})]}),e.jsxs("div",{className:"gym-column",children:[e.jsxs("div",{className:"Theader",children:[e.jsx("h2",{children:"Booking for Gym Trainer"}),e.jsx("input",{type:"text",placeholder:"Search",value:d,onChange:t=>{g(t.target.value),l(1)}})]}),e.jsxs("table",{className:"gym-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Trainer"}),e.jsx("th",{children:"Total Amount"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Option"})]})}),e.jsx("tbody",{children:v.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.trainer_name}),e.jsxs("td",{children:["₱",parseInt(t.trainer_total_price).toLocaleString()]}),e.jsx("td",{children:t.trainer_status}),e.jsxs("td",{children:[t.trainer_status=="Pending"&&e.jsx("a",{className:"cancelBookTrainor",href:"#",onClick:r=>{r.preventDefault(),k(t.id)},children:"Cancel"}),t.trainer_status=="Cancelled"&&e.jsx("a",{className:"deleteBookTrainor",href:"#",onClick:r=>{r.preventDefault(),A(t.id)},children:"Delete"}),e.jsx("a",{href:`/member/account-history/trainor?id=${t.id}`,children:" View "})]})]},t.id))})]}),e.jsx("div",{className:"pagination",children:Array.from({length:P},(t,r)=>e.jsx("button",{onClick:()=>_(r+1),className:o===r+1?"active":"",children:r+1},r+1))})]})]})]})}function Q(){return e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsx(L,{}),e.jsx($,{}),e.jsx(H,{})]})}export{Q as default};
