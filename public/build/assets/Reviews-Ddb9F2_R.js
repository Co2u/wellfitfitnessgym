import{X as g,r as n,j as e}from"./app-CI1o2zDc.js";import{M as F}from"./Head-DCbAlkY9.js";import{R}from"./ReviewsBanner-MAUTmGhL.js";import{H as C,F as E}from"./Footer-CyP-doCv.js";import"./Helmet-BgtHYfTe.js";function D(){const{reviews:p}=g().props,f=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}),N=s=>{const r=Math.min(s,5),l=5-r;return e.jsxs(e.Fragment,{children:[[...Array(r)].map((_,o)=>e.jsx("i",{className:"fa fa-star filled-star"},`filled-${o}`)),[...Array(l)].map((_,o)=>e.jsx("i",{className:"fa fa-star unfilled-star"},`unfilled-${o}`))]})},{cu_user_id:m}=g().props,[a,i]=n.useState({user_id:m,rate:"1",comment:""}),[d,c]=n.useState({}),[h,u]=n.useState(""),[S,v]=n.useState(!0),[x,j]=n.useState(!1),b=s=>{i({...a,[s.target.name]:s.target.value})},w=s=>{const t=s.target.value;i(r=>({...r,rate:t}))},y=async s=>{s.preventDefault(),c({}),u(""),j(!0);try{const t=await fetch("/member/reviews",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(a)});if(!t.ok){const l=await t.json();c({general:l.message||"Error submitting review!"});return}const r=await t.json();console.log(r),u("Your review has been successfully submitted."),i({user_id:m,rate:"1",comment:""}),v(!1)}catch(t){console.error("Error submitting review:",t),c({general:"Something went wrong. Please try again!"})}finally{j(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"testimonial-section spad bg-color-000 ",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"section-title",children:[e.jsx("span",{children:"Testimonial"}),e.jsx("h2",{children:"Our client say"})]})})}),e.jsx("div",{className:"ts_slider owl-carousel",children:p.map(s=>e.jsx("div",{className:"ts_item",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-lg-12 text-center",children:[e.jsx("div",{className:"ti_pic",children:e.jsx("img",{src:s?.profile?`/template/images/${s.profile}`:"/template/member/img/Portrait_Placeholder.png",alt:"profile"})}),e.jsxs("div",{className:"ti_text",children:[e.jsxs("p",{children:[s.comment,e.jsx("br",{}),e.jsx("p",{className:"review_date",children:f.format(new Date(s.created_at))})]}),e.jsxs("h5",{children:[s.first_name," ",s.last_name]}),e.jsx("div",{className:"tt-rating",children:N(s.rate)})]})]})})},s.id))})]})}),e.jsx("section",{className:"contact-section spad",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"col-lg-12 text-center",children:e.jsxs("div",{className:"leave-comment",children:[e.jsx("div",{className:"section-title contact-title text-center",children:e.jsx("h2",{children:"Write a Review"})}),d.general&&e.jsx("p",{className:"alert alert-danger",children:d.general}),h&&e.jsx("p",{className:"alert alert-success",children:h}),S&&e.jsxs("form",{onSubmit:y,children:[e.jsx("input",{type:"hidden",name:"user_id",value:a.user_id}),e.jsx("div",{className:"star-rating",children:[1,2,3,4,5].map(s=>e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"rate",value:s,checked:a.rate===String(s),onChange:w}),e.jsx("i",{className:`fa fa-star ${a.rate>=s?"checked":""}`})]},s))}),e.jsx("textarea",{placeholder:"Enter Your Comment...",required:!0,name:"comment",value:a.comment,onChange:b}),e.jsx("br",{}),e.jsx("button",{type:"submit",className:"color-white",disabled:x,children:x?"Submitting...":"Submit Review"})]})]})})})})]})}function P(){return e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsx(C,{}),e.jsx(R,{}),e.jsx(D,{}),e.jsx(E,{})]})}export{P as default};
