import{g as q,X as z,r as i,j as e}from"./app-B5uUBiNZ.js";import{M as Q}from"./Head-BXCmIjaD.js";import{H as U,F as Z}from"./Footer-Ch4wCGTZ.js";import{a as ee}from"./js.cookie-Cz0CWeBA.js";import{d as h}from"./dayjs.min-RJS5d9iP.js";import"./Helmet-C80axTHt.js";var b={exports:{}},te=b.exports,I;function re(){return I||(I=1,function(o,l){(function(j,s){o.exports=s()})(te,function(){return function(j,s){s.prototype.isSameOrAfter=function(p,f){return this.isSame(p,f)||this.isAfter(p,f)}}})}(b)),b.exports}var ae=re();const ne=q(ae);var N={exports:{}},se=N.exports,Y;function ie(){return Y||(Y=1,function(o,l){(function(j,s){o.exports=s()})(se,function(){return function(j,s){s.prototype.isSameOrBefore=function(p,f){return this.isSame(p,f)||this.isBefore(p,f)}}})}(N)),N.exports}var oe=ie();const ce=q(oe);h.extend(ne);h.extend(ce);function le(){const{get_trainer_by_id:o,get_user_info:l,get_all_user_booktrainor:j}=z().props,[s,p]=i.useState(1),[f,B]=i.useState(!1),[k,w]=i.useState(""),[C,F]=i.useState(""),[y,G]=i.useState("GCASH"),[c,$]=i.useState("1 Month"),[M,R]=i.useState("8:00am - 9:30am"),[n,H]=i.useState(""),[v,P]=i.useState(0),[_,m]=i.useState({}),[V,X]=i.useState("");i.useEffect(()=>{const t=new Date;t.setDate(t.getDate()+1),X(t.toISOString().split("T")[0])},[]),i.useEffect(()=>{l.phone&&w(l.phone)},[l.phone]);const[de,J]=i.useState(2e3);i.useEffect(()=>{const t=parseInt(c,10)||1;J(t*2e3);const r=document.querySelector(".priceTotal");r&&(r.textContent=`₱${t*2e3} Total Amount`);const a=document.querySelector(".monthsDuration");a&&(a.textContent=`${t} ${t>1?"Months":"Month"}`)},[c]),i.useEffect(()=>{const t=document.querySelectorAll(".priceTotal")[1],r=document.querySelectorAll(".priceTotal")[2];if(n&&c){const a=parseInt(c),d=isNaN(a)?parseInt(c):a,g=h(n),S=g.add(d,"month");t&&(t.textContent=g.format("YYYY-MM-DD")),r&&(r.textContent=S.format("YYYY-MM-DD"))}else t&&(t.textContent=""),r&&(r.textContent="")},[n,c]);const K=async t=>{if(t.preventDefault(),!(v>0)){alert("Verification code has been RESEND."),P(60);try{const r=await fetch("/member/trainor/form",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({email:l.email,trainer_name:o.trainer_name,trainer_image:o.trainer_image})});if(!r.ok){const a=await r.json();m({general:a.message||"Error submitting!"});return}}catch(r){console.error("Error submitting:",r),m({general:"Something went wrong. Please try again!"});return}}};i.useEffect(()=>{let t;return v>0&&(t=setInterval(()=>{P(r=>r-1)},1e3)),()=>clearInterval(t)},[v]);const T=async t=>{t.preventDefault();let r={};if(s===1&&!f&&(r.agree="Please accept the terms and conditions before proceeding.",m(r)),s===2&&!C.trim()&&(r.verificationCode="Please enter the verification code sent to your email."),s===3&&y==="GCASH"&&!k.trim()&&(r.gcash="Please enter your GCASH number."),Object.keys(r).length>0){m(r);return}if(m({}),s===1)try{const a=await fetch("/member/trainor/form",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({email:l.email,trainer_name:o.trainer_name,trainer_image:o.trainer_image})});if(!a.ok){const d=await a.json();m({general:d.message||"Error submitting!"});return}}catch(a){console.error("Error submitting:",a),m({general:"Something went wrong. Please try again!"});return}if(s===2&&ee.get("trainer_verification_code")!=C){r.verificationCode="Wrong verification code, Please check your email!.",m(r);return}if(s===3)if(y=="GCASH"){const a=parseInt(c),g=h(n).add(a,"month"),D=parseInt(c)*2e3;try{const u=await(await fetch("/trainer-gcash-payment",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({trainer_user_id:l.id,trainer_id:o.id,trainer_payment_method:y,trainer_status:"Approved",trainer_duration:c,trainer_time_schedule:M,trainer_total_price:D,trainer_start_date:n,trainer_end_date:g.format("YYYY-MM-DD"),customer_name:l.first_name+" "+l.last_name,phone:l.phone,email:l.email})})).json();console.log("Sending Data:",u),u.message=="This trainer is already booked during the selected schedule."&&alert("The selected date and time are not available. Please choose another schedule."),u.redirect_url?window.location.href=u.redirect_url:console.error("Payment initiation failed. Please try again.")}catch(x){console.error("Payment initiation failed",x)}}else{const a=parseInt(c),g=h(n).add(a,"month"),D=parseInt(c)*2e3;try{const x=await fetch("/trainer-over-the-counter-payment",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({trainer_user_id:l.id,trainer_id:o.id,trainer_payment_method:y,trainer_status:"Pending",trainer_duration:c,trainer_time_schedule:M,trainer_total_price:D,trainer_start_date:n,trainer_end_date:g.format("YYYY-MM-DD")})}),u=await x.json();if(console.log(u),u.message=="This trainer is already booked during the selected schedule."&&alert("The selected date and time are not available. Please choose another schedule."),u.message=="You have already requested schedule for training."&&alert("You have already requested schedule for training."),u.message=="Success"&&(window.location.href="/member/trainor/thank-you"),x.ok)window.location.href="/member/trainor/thank-you";else{const L=await x.json();m({general:L.message||"Error submitting!"});return}}catch(x){console.error("Error submitting:",x),m({general:"Something went wrong. Please try again!"});return}}p(a=>Math.min(a+1,3))},O=()=>p(t=>Math.max(t-1,1));new Set(j.map(t=>`${t.trainer_start_date}|${t.trainer_time_schedule}`));const A=t=>["8:00am - 9:30am","9:30am - 11:00am","11:00am - 12:30pm","12:30pm - 2:00pm","2:00pm - 3:30pm"].every(a=>j.some(d=>d.trainer_id===o.id&&d.trainer_start_date===t&&d.trainer_time_schedule===a)),E=(t,r)=>j.some(a=>{const d=h(a.trainer_start_date),g=h(a.trainer_end_date),S=h(t);return Number(a.trainer_user_id)===Number(l.id)&&a.trainer_time_schedule===r&&S.isSameOrAfter(d,"day")&&S.isSameOrBefore(g,"day")}),W=n&&["8:00am - 9:30am","9:30am - 11:00am","11:00am - 12:30pm","12:30pm - 2:00pm","2:00pm - 3:30pm"].every(t=>E(n,t));return e.jsxs(e.Fragment,{children:[s===1&&e.jsx("section",{className:"bmi-calculator-section spad pt-230 step-nav-1",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"section-title chart-title",children:[e.jsx("span",{children:" Wellfit Fitness Gym - Terms and Conditions"}),e.jsx("h2",{children:"By booking our gym trainer, you agree to these terms:"}),e.jsxs("ul",{className:"ul-element",children:[e.jsx("li",{children:"Training sessions run daily from 8 AM to 5 PM."}),e.jsx("li",{children:"Each session lasts 1 hour and 30 minutes."}),e.jsx("li",{children:"Trainer fee: ₱2,000 per month."}),e.jsx("li",{children:"Bookings must be made at least 24 hours in advance and are subject to trainer availability."}),e.jsx("li",{children:"Payments are non-refundable once a trainer is booked."}),e.jsx("li",{children:"Proper gym attire is required during training sessions."}),e.jsx("li",{children:"Clients must follow the trainer’s guidance to ensure safety and effectiveness."}),e.jsx("li",{children:"Wellfit is not liable for injuries sustained during training sessions."}),e.jsx("li",{children:e.jsx("a",{href:"/member/privacy-policy/",target:"_blank",rel:"noopener noreferrer",children:"All personal information is handled in compliance with Republic Act No. 10173 (Data Privacy Act of 2012)."})})]}),e.jsxs("label",{className:"agree-checkbox",children:[e.jsx("input",{type:"checkbox",name:"agree",checked:f,onChange:t=>B(t.target.checked)})," ","  I agree to the terms and conditions stated above."]}),_.agree&&e.jsx("p",{className:"alert alert-danger",children:_.agree}),e.jsx("button",{type:"button",className:"custom-orange-btn mt-3",onClick:T,children:"Continue"})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"section-title chart-calculate-title",children:e.jsx("img",{src:`/template/images/${o.trainer_image}`,alt:"Trainer Image",className:"bgPortraite1 trainorIMGLeft"})})})]})})}),s===2&&e.jsx("section",{className:"bmi-calculator-section spad pt-230 step-nav-2",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"section-title chart-title",children:[e.jsx("span",{children:"Email Verification"}),e.jsx("h2",{children:"We sent a verification code to your registered email"}),e.jsx("p",{className:"mb-3 pb-3",children:"For enhanced security, please enter the verification code we sent to your email in the field below. This helps us ensure that your account remains protected and accessible only to you. If you haven’t received the code, please check your spam folder or request a new one."}),e.jsx("input",{type:"text",name:"verification_code",placeholder:"Enter verification code",value:C,className:"col-12",onChange:t=>F(t.target.value)}),_.verificationCode&&e.jsx("p",{className:"alert alert-danger",children:_.verificationCode}),e.jsx("button",{className:"custom-orange-btn mt-3",onClick:T,children:"Continue"}),e.jsx("button",{className:"custom-orange-btn mt-3",onClick:K,disabled:v>0,children:v>0?`Resend Code (${v}s)`:"Resend Verification Code"}),e.jsx("button",{className:"custom-orange-btn mt-3",onClick:O,children:"Back"})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"section-title chart-calculate-title",children:e.jsx("img",{src:`/template/images/${o.trainer_image}`,alt:"Trainer Image",className:"bgPortraite1 trainorIMGLeft"})})})]})})}),s===3&&e.jsx("section",{className:"bmi-calculator-section spad pt-230 step-nav-3",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-6",children:[e.jsxs("div",{className:"section-title chart-title",children:[e.jsx("span",{children:"Select Payment Method"}),e.jsx("h2",{children:"Please select whether Over-the-Counter or GCash payment"})]}),e.jsx("div",{className:"chart-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Trainer's Name:"}),e.jsx("th",{children:o.trainer_name})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"point",children:"Price:"}),e.jsx("td",{children:"₱2000 per Month"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"point",children:"Session Time:"}),e.jsx("td",{children:"1 hour and 30 minutes per day"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"point",children:"Duration:"}),e.jsx("td",{className:"monthsDuration",children:"1 Month"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"point",children:"Total Price:"}),e.jsx("td",{className:"priceTotal",children:" ₱2000 Total Amount"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"point",children:"Start Date:"}),e.jsx("td",{children:n?h(n).format("MMMM D, YYYY"):""})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"point",children:"End Date:"}),e.jsx("td",{children:n&&c?h(n).add(parseInt(c),"month").format("MMMM D, YYYY"):""})]})]})]})}),e.jsxs("div",{className:"payment-element-block mt-3 pt-2",children:[e.jsx("span",{className:"orange-label",children:"Select Schedule:"}),e.jsx("input",{className:"trainer_start_date",value:n,onChange:t=>H(t.target.value),type:"date",min:V,style:{backgroundColor:A(n)?"#f8d7da":""},disabled:A(n)}),W&&e.jsx("p",{className:"alert alert-warning mt-2",children:"All time slots for this date are already booked. Please choose another date."}),e.jsx("select",{name:"trainer_time_schedule",className:"trainer_time_schedule",value:M,onChange:t=>R(t.target.value),children:["8:00am - 9:30am","9:30am - 11:00am","11:00am - 12:30pm","12:30pm - 2:00pm","2:00pm - 3:30pm"].map(t=>{const r=n&&E(n,t);return e.jsxs("option",{value:t,disabled:r,children:[t," ",r?"(Taken)":""]},t)})}),e.jsxs("select",{className:"trainer_duration",name:"trainer_duration",value:c,onChange:t=>$(t.target.value),children:[e.jsx("option",{selected:!0,value:"1 Month",children:"1 Month"}),e.jsx("option",{value:"3 Months",children:"3 Months"}),e.jsx("option",{value:"6 Months",children:"6 Months"}),e.jsx("option",{value:"12 Months",children:"12 Months"})]})]}),e.jsxs("div",{className:"payment-element-block mt-3 pt-2",children:[e.jsx("span",{className:"orange-label",children:"Select Payment Method:"}),e.jsxs("select",{className:"payment_method",name:"payment_method",value:y,onChange:t=>G(t.target.value),children:[e.jsx("option",{selected:!0,value:"GCASH",children:"GCASH"}),e.jsx("option",{value:"Over The Counter",children:"Over The Counter"})]}),y==="GCASH"&&e.jsx("input",{type:"number",name:"gcash",placeholder:"Enter GCASH Number",value:k,onChange:t=>w(t.target.value)}),_.gcash&&e.jsx("p",{className:"alert alert-danger",children:_.gcash}),e.jsx("button",{className:"custom-orange-btn mt-3",onClick:T,children:"Pay"}),e.jsx("button",{className:"custom-orange-btn mt-3 ",onClick:O,children:"Back"})]})]}),e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"section-title chart-calculate-title",children:e.jsx("img",{src:`/template/images/${o.trainer_image}`,alt:"Trainer Image",className:"bgPortraite1 trainorIMGLeft"})})})]})})})]})}function je(){return e.jsxs(e.Fragment,{children:[e.jsx(Q,{}),e.jsx(U,{}),e.jsx(le,{}),e.jsx(Z,{})]})}export{je as default};
