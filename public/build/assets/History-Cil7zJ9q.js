import{X as m,r,j as e}from"./app-B5uUBiNZ.js";import{A as h,a as u,b as p,c as x}from"./Footer-DrHeRHwj.js";import{X as j}from"./index.es-BxTywsI4.js";import{h as f}from"./moment-BLMuvzoS.js";import"./Helmet-C80axTHt.js";const g=()=>{const{get_logs:a}=m().props,[o,n]=r.useState(""),[y,b]=r.useState({logDescription:"",logDate:"",logId:""}),[v,N]=r.useState(null),c=[{name:"Description",selector:t=>t.first_name+" "+t.last_name+" "+t.log_description,sortable:!0},{name:"Date",selector:t=>f(t.log_date).format("MMMM D, YYYY"),sortable:!0},{name:"Option",cell:t=>e.jsx(e.Fragment,{children:e.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),l(t.id)},children:"Delete"})})}],l=async t=>{if(window.confirm("Are you sure you want to delete this log?"))try{(await fetch(`/admin/history/delete?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({id:t})})).ok?(alert("Successfully deleted."),window.location.href="/admin/history"):alert("Failed to delete.")}catch(i){console.error("Error submitting:",i)}},d=a.filter(t=>`${t.first_name} ${t.last_name} ${t.log_description}`.toLowerCase().includes(o.toLowerCase()));return e.jsx("div",{children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card recent-sales overflow-auto",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Activity History / Logs"}),e.jsx(j,{columns:c,pagination:!0,data:d,highlightOnHover:!0,subHeader:!0,subHeaderComponent:e.jsx("input",{type:"text",placeholder:"Search",onChange:t=>n(t.target.value),style:{width:"100%",margin:"0"}})})]})})})})};function w(){return e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx(u,{}),e.jsx(p,{}),e.jsxs("main",{id:"main",className:"main",children:[e.jsxs("div",{className:"pagetitle",children:[e.jsx("h1",{children:"History"}),e.jsx("nav",{children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"#",children:"Home"})}),e.jsx("li",{className:"breadcrumb-item active",children:"Activity logs"})]})})]}),e.jsx("section",{className:"section dashboard",children:e.jsx(g,{})})]}),e.jsx(x,{})]})}export{w as default};
