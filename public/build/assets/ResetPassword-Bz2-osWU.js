import{X as w,r as o,j as e}from"./app-CI1o2zDc.js";import{M as N}from"./Head-DCbAlkY9.js";import"./Helmet-BgtHYfTe.js";function y(){const{email:i}=w().props,[s,l]=o.useState({email:i||"",password:"",confirm_password:""}),[c,a]=o.useState({}),[d,m]=o.useState(""),[f,g]=o.useState(!0),[u,p]=o.useState(!1),n=t=>{l({...s,[t.target.name]:t.target.value})},j=async t=>{t.preventDefault(),a({}),m(""),p(!0);try{if(s.password===s.confirm_password){const r=await fetch("/reset-password",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(s)});if(!r.ok){const x=await r.json();a({general:x.message||"Wrong email or password!"});return}const h=await r.json();console.log(h),h.email_verified_at===null?(console.log("Email is not verified"),a({general:"Account is not yet verified, Please check your email!"})):(m("You have successully changed password, Redirecting to login page..."),l({email:i||"",password:"",confirm_password:""}),g(!1),setTimeout(()=>{window.location.href="/signin/"},3e3))}else a({general:"Passwords did not match!"})}catch(r){console.error("Error during activation:",r),a({general:"General Error!"})}finally{p(!1)}};return e.jsx(e.Fragment,{children:e.jsx("span",{className:"bg-img-v-3",children:e.jsx("section",{className:"section-404",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"text-404",children:[e.jsx("h1",{children:"Password Reset"}),e.jsx("h3",{children:"Forgot your password?"}),e.jsx("p",{children:"If you didnâ€™t request a password reset, you can safely ignore this email."}),c.general&&e.jsx("p",{className:"alert alert-danger",children:c.general}),d&&e.jsx("p",{className:"alert alert-success",children:d}),f&&e.jsxs("form",{onSubmit:j,className:"search-404",children:[e.jsx("input",{type:"hidden",name:"email",value:s.email,onChange:n,placeholder:"Enter email...",required:!0}),e.jsx("input",{type:"password",name:"password",value:s.password,onChange:n,placeholder:"Enter password...",required:!0}),e.jsx("input",{type:"password",name:"confirm_password",value:s.confirm_password,onChange:n,placeholder:"Confirm password...",required:!0}),e.jsx("br",{}),e.jsxs("button",{type:"submit",className:"color-white",disabled:u,children:[e.jsx("i",{className:"fa fa-plus"})," ",u?"Authenticating ...":"Reset Password"]})]}),e.jsxs("a",{href:"/signup",className:"fs-11 color-orange mb-3",children:[e.jsx("i",{className:"fa fa-plus"})," Don't have an account? Sign Up"]})," ",e.jsx("br",{}),e.jsxs("a",{href:"/forgot",className:"fs-11 color-orange mb-3",children:[e.jsx("i",{className:"fa fa-question"})," Forgot Account?"]}),e.jsx("br",{}),e.jsxs("a",{href:"/",className:"fs-11 color-orange",children:[e.jsx("i",{className:"fa fa-home"})," Home Page "]})]})})})})})})})}function E(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx(y,{})]})}export{E as default};
